# ν‚¤μ›€μ¦κ¶ REST API λ¬Έμ μ‚¬ν•­ (2026-02-28)

## π“‹ κ°μ”
Stock Radar Spark ν”„λ΅μ νΈμ—μ„ **μΌλ΄‰ κ³Όκ±° λ°μ΄ν„°(120μΌ)**λ¥Ό μ΅°νν•κΈ° μ„ν•΄ ν‚¤μ›€μ¦κ¶ REST API λ¬Έμ„ν™”κ°€ ν•„μ”ν•©λ‹λ‹¤.

---

## π” λ¬Έμ 1: API μ—”λ“ν¬μΈνΈ ν™•μΈ

### ν„μ¬ μƒν™©
- μ•±ID: `pAdnMuhRH3bPcJg8m97S7Q8-SNJj43MYuedfkJh3eI0` (`.env`μ—μ„ `KIWOOM_APP_ID`)
- λΉ„λ°€ν‚¤: `zIxrA71PNV4R4VbUB3VKkewUbdpjgn4yvamhl-RiaPY` (`.env`μ—μ„ `KIWOOM_SECRET_KEY`)
- ν„μ¬ μ¶”μ • μ—”λ“ν¬μΈνΈ: `https://openapi.kiwoom.com/openapi/uapi/domestic-stock/v1/quotations/inquire-daily-itemchartprice`

### λ¬Έμ λ‚΄μ©
**μΌλ΄‰(Daily) κ³Όκ±° λ°μ΄ν„°λ¥Ό μ΅°νν•λ” μ •ν™•ν• REST API μ—”λ“ν¬μΈνΈλ¥Ό μ•λ ¤μ£Όμ„Έμ”.**
- μΆ…λ©λ³„ μΌλ΄‰ λ°μ΄ν„° (120μΌ): `GET /openapi/uapi/domestic-stock/v1/quotations/inquire-daily-itemchartprice` ?
- μ•„λ‹λ©΄ λ‹¤λ¥Έ μ—”λ“ν¬μΈνΈκ°€ μλ‚μ”?
- κ°λ°μ λ¬Έμ„ λ§ν¬λ¥Ό μ κ³µν•΄μ£Όμ‹λ©΄ κ°μ‚¬ν•κ² μµλ‹λ‹¤.

---

## π” λ¬Έμ 2: μΈμ¦ λ°©μ‹ κ²€μ¦

### ν„μ¬ μ½”λ“μ μΈμ¦ λ°©μ‹
```python
# OAuth 2.0 Bearer Token λ°©μ‹ μ‚¬μ©
headers = {
    'authorization': f'Bearer {self.get_token()}',
    'content-type': 'application/json; charset=utf-8'
}
```

### λ¬Έμ λ‚΄μ©
**REST API μΈμ¦ λ°©μ‹μ„ λ…ν™•ν μ•λ ¤μ£Όμ„Έμ”:**
- OAuth 2.0 Authorization Code Flowλ¥Ό μ‚¬μ©ν•λ‚μ”?
- λ§λ‹¤λ©΄, ν† ν° λ°κΈ‰ μ—”λ“ν¬μΈνΈλ”?
- Redirect URI: `http://localhost:8000/callback` λλ” λ‹¤λ¥Έ μ„¤μ •μ΄ ν•„μ”ν•κ°€μ”?
- ν† ν° μ ν¨ κΈ°κ°„μ€?
- Refresh Token κ°±μ‹  λ°©μ‹μ€?
- IP ν™”μ΄νΈλ¦¬μ¤νΈ λ“± μ¶”κ°€ λ³΄μ• μ„¤μ •μ΄ ν•„μ”ν•κ°€μ”?

---

## π“ λ¬Έμ 3: μ”μ²­ νλΌλ―Έν„° μ¤ν™

### λ©ν‘: νΉμ • μΆ…λ© 120μΌ μΌλ΄‰ λ°μ΄ν„° μ΅°ν

#### μΏΌλ¦¬ νλΌλ―Έν„°
```
GET /uapi/domestic-stock/v1/quotations/inquire-daily-itemchartprice?
  fid_cond_mrkt_div_code=J&          # μ½”μ¤ν”Ό/μ½”μ¤λ‹¥ κµ¬λ¶„ μ½”λ“
  fid_input_iscd=079550&              # μΆ…λ©μ½”λ“ (LIGλ„¥μ¤μ›)
  fid_org_adj_prc=0&                  # μμ •μ£Όκ°€ (0=λ―Έμ μ©, 1=μ μ©)
  fid_period_div_code=D               # μ£ΌκΈ° (D=μΌλ΄‰, ?=μ£Όλ΄‰, ?=μ›”λ΄‰)
```

### λ¬Έμ λ‚΄μ©
**μ΄ νλΌλ―Έν„°λ“¤μ΄ μ •ν™•ν•μ§€ ν™•μΈ λ° μ¶”κ°€ μ •λ³΄ μ”μ²­:**
1. **μ‹κ°„ λ²”μ„ μ§€μ • νλΌλ―Έν„°:**
   - κΈ°κ°„μ„ μ§€μ •ν•λ” νλΌλ―Έν„°λ”? (start_date, end_date? λλ” κΈ°κ°„ μλ™ κ³„μ‚°?)
   - 120μΌ μ΄μ „ λ°μ΄ν„°κ°€ ν• λ²μ— λ°ν™λλ‚μ”? μ•„λ‹λ©΄ νμ΄μ§•μ΄ ν•„μ”ν•κ°€μ”?
   - μµλ€ μ΅°ν κ°€λ¥ν• μΌμ μ ν•μ΄ μλ‚μ”?

2. **μΆ…λ©μ½”λ“ ν•μ‹:**
   - 6μλ¦¬ μ½”λ“ (079550)λ΅ λ§λ‚μ”?
   - μΆ…κ°€ν• μΆ…λ©λ„ μ΅°ν κ°€λ¥ν•κ°€μ”?

3. **μ‘λ‹µ λ°μ΄ν„° μ–‘:**
   - μµλ€ λ‡ κ° ν•­λ©κΉμ§€ ν• λ²μ— λ°ν™λλ‚μ”?
   - λ°μ΄ν„° μ •λ ¬ μμ„ (μµμ‹ μ? μ¤λλμ?)?

4. **κΈ°νƒ€ μ„ νƒ νλΌλ―Έν„°:**
   - Rate Limit μ μ•½μ‚¬ν•­?
   - μ”μ²­μ— Bodyκ°€ ν•„μ”ν•κ°€μ”? (GETμ΄λ©΄ μΌλ°μ μΌλ΅ μΏΌλ¦¬ νλΌλ―Έν„°λ§)

---

## π“ λ¬Έμ 4: μ‘λ‹µ JSON ν•„λ“λ… λ…μ‹

### ν•„μ”ν• ν•„λ“ (120μΌ μμ§‘μ©)

| λ°μ΄ν„° | ν•„λ“λ… (μ¶”μ •) | ν•„λ“λ… (ν™•μΈ ν•„μ”) | λ°μ΄ν„° νƒ€μ… | μμ‹ |
|--------|--------------|------------------|----------|------|
| λ‚ μ§ | `date` λλ” `stck_bsop_date` | β“ | string (YYYYMMDD) | 20260220 |
| μ‹κ°€ | `open` λλ” `stck_oprc` | β“ | number | 125500 |
| κ³ κ°€ | `high` λλ” `stck_hgpr` | β“ | number | 127000 |
| μ €κ°€ | `low` λλ” `stck_lwpr` | β“ | number | 124000 |
| μΆ…κ°€ | `close` λλ” `stck_clpr` | β“ | number | 125900 |
| κ±°λλ‰ | `volume` λλ” `acml_vol` | β“ | number | 1234567 |
| κ±°λλ€κΈ | `amount` (μ„ νƒ) λλ” `acml_tr_pbmn` | β“ | number | 155234567000 |

### λ¬Έμ λ‚΄μ©
**μ‘λ‹µ JSONμ μ •ν™•ν• ν•„λ“λ…μ„ μ•λ ¤μ£Όμ„Έμ”:**
```json
// μμƒ μ‘λ‹µ κµ¬μ΅°
{
  "rt_cd": "0",
  "msg_cd": "0",
  "msg1": "OK",
  "output": [
    {
      "???": "20260220",      // λ‚ μ§
      "???": 125500,          // μ‹κ°€
      "???": 127000,          // κ³ κ°€
      "???": 124000,          // μ €κ°€
      "???": 125900,          // μΆ…κ°€
      "???": 1234567          // κ±°λλ‰
    }
  ]
}
```

---

## π“ λ¬Έμ 5: κ°λ°μ λ¬Έμ„ λ° μƒν” μ½”λ“

### λ¬Έμ λ‚΄μ©
λ‹¤μ λ¬Έμ„λ¥Ό μ κ³µν•΄μ£Όμ„Έμ”:

1. **REST API κ³µμ‹ λ¬Έμ„**
   - URL: ?
   - λ²„μ „: ?

2. **μΌλ΄‰ λ°μ΄ν„° μ΅°ν API λ…μ„Έ**
   - μ •ν™•ν• μ—”λ“ν¬μΈνΈ κ²½λ΅
   - μ „μ²΄ νλΌλ―Έν„° λ©λ΅
   - μ‘λ‹µ ν¬λ§· κ°μ”

3. **μΈμ¦ κ°€μ΄λ“**
   - OAuth 2.0 μƒμ„Έ μ μ°¨
   - ν† ν° λ°κΈ‰ λ° κ°±μ‹  μ½”λ“ μƒν”
   - Python λλ” cURL μμ 

4. **ν†µν•© ν…μ¤νΈ μƒν”**
   - Python requests λΌμ΄λΈλ¬λ¦¬ μ‚¬μ© μμ 
   - 120μΌ λ°μ΄ν„° μ΅°ν μμ 
   - μ—λ¬ ν•Έλ“¤λ§ μμ 

---

## π’Ύ ν„μ¬ ν”„λ΅μ νΈ ν†µν•© μƒν™©

### νμΌ μ„μΉ
- λνΌ ν΄λμ¤: `backend/services/kiwoom_openapi.py`
- ν…μ¤νΈ νμΌ: `backend/test_kiwoom_chart.py`
- ν™κ²½ μ„¤μ •: `.env` (APP_ID, SECRET_KEY)

### κµ¬ν„ μ™„λ£ ν•­λ©
β… OAuth ν† ν° λ°κΈ‰ λ΅μ§ (λ―Έμ™„μ„± - κ³µμ‹ λ¬Έμ„ ν•„μ”)
β… Daily Chart API νΈμ¶ κµ¬μ΅°
β… JSON μ‘λ‹µ νμ‹± κµ¬μ΅°

### κµ¬ν„ ν•„μ” ν•­λ©
β³ μ •ν™•ν• μ—”λ“ν¬μΈνΈ ν™•μΈ
β³ νλΌλ―Έν„° μµμ ν™” (κΈ°κ°„ μ„¤μ • λ°©μ‹)
β³ μ‘λ‹µ ν•„λ“λ… λ§µν•‘
β³ μ—λ¬ μ²λ¦¬ λ° μ¬μ‹λ„ λ΅μ§
β³ 120μΌ λ°μ΄ν„° μ΄κΈ°ν™” λ°°μΉ μ¤ν¬λ¦½νΈ

---

## π“ μ—°λ½μ² λ° μ°μ„ μμ„

| λ¬Έμ μμ„ | μ°μ„ μμ„ | λ‚΄μ© | μν–¥λ„ |
|----------|---------|------|--------|
| 1 | π”΄ κΈ΄κΈ‰ | API μ—”λ“ν¬μΈνΈ μ •ν™•μ„± ν™•μΈ | μ „μ²΄ κΈ°λ¥ μ‘λ™ μ—¬λ¶€ |
| 2 | π”΄ κΈ΄κΈ‰ | μ‘λ‹µ JSON ν•„λ“λ… λ…μ‹ | λ°μ΄ν„° νμ‹± ν•„μ |
| 3 | π  λ†’μ | μΈμ¦ λ°©μ‹ (OAuth μ μ°¨) | κ°λ°/λ°°ν¬ ν† ν° μ„¤μ • |
| 4 | π  λ†’μ | κΈ°κ°„ μ΅°ν νλΌλ―Έν„° | 120μΌ λ°μ΄ν„° μμ§‘ |
| 5 | π΅ μ¤‘κ°„ | κ°λ° λ¬Έμ„ λ§ν¬ | ν–¥ν›„ μ μ§€λ³΄μ |

---

## π― κΈ°λ€ ν¨κ³Ό

μ΄ μ •λ³΄κ°€ ν™•λ³΄λλ©΄:
1. β… 120μΌ μΌλ΄‰ λ°μ΄ν„° μλ™ μμ§‘ κ°€λ¥
2. β… μΌλ³„ κ°±μ‹  μ¤μΌ€μ¤„λ¬ μ •μƒ μ΄μ
3. β… Stock Radar Sparkμ ν•κµ­ μ£Όμ‹ λ¶„μ„ κ³ λ„ν™”
4. β… λ¨λ©ν…€/ν’μ§ μ¤μ½”μ–΄ κΈ°λ° μΆ…λ© μ„ μ • μ•κ³ λ¦¬μ¦ ν™μ„±ν™”
