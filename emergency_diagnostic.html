<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ ê¸´ê¸‰ ì§„ë‹¨ ë„êµ¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #00d4ff;
        }
        .section {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .section h2 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 20px;
        }
        button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: #fff;
        }
        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: #fff;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }
        .success {
            color: #48bb78;
        }
        .error {
            color: #fc8181;
        }
        .info {
            color: #00d4ff;
        }
        select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
        }
        select option {
            background: #1a1a2e;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Decision Stream ê¸´ê¸‰ ì§„ë‹¨ ë„êµ¬</h1>
        
        <!-- í…ŒìŠ¤íŠ¸ 1: ì£¼ê°€ ìë™ ì…ë ¥ -->
        <div class="section">
            <h2>1ï¸âƒ£ ì£¼ê°€ ìë™ ì…ë ¥ í…ŒìŠ¤íŠ¸</h2>
            <select id="test-sector">
                <option value="">-- ì„¹í„° ì„ íƒ --</option>
                <option value="ë°©ì‚°">ë°©ì‚°</option>
                <option value="ë°˜ë„ì²´">ë°˜ë„ì²´</option>
            </select>
            <select id="test-stock">
                <option value="">-- ë¨¼ì € ì„¹í„°ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
            </select>
            <button class="btn-primary" onclick="testPriceInput()">â–¶ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="result1" class="result" style="display:none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 2: íŒŒì¼ ê²½ë¡œ -->
        <div class="section">
            <h2>2ï¸âƒ£ íŒŒì¼ ê²½ë¡œ í™•ì¸</h2>
            <button class="btn-success" onclick="checkFiles()">â–¶ íŒŒì¼ ê²½ë¡œ ê²€ì‚¬</button>
            <div id="result2" class="result" style="display:none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 3: ì°¨íŠ¸ ì—´ê¸° -->
        <div class="section">
            <h2>3ï¸âƒ£ ì°¨íŠ¸ ë¶„ì„ í˜ì´ì§€ ì—´ê¸°</h2>
            <button class="btn-primary" onclick="testChartOpen()">â–¶ ì°¨íŠ¸ ì—´ê¸° í…ŒìŠ¤íŠ¸</button>
            <div id="result3" class="result" style="display:none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 4: ë¸Œë¼ìš°ì € ì •ë³´ -->
        <div class="section">
            <h2>4ï¸âƒ£ í™˜ê²½ ì •ë³´</h2>
            <button class="btn-success" onclick="showEnvironment()">â–¶ í™˜ê²½ ì •ë³´ ë³´ê¸°</button>
            <div id="result4" class="result" style="display:none;"></div>
        </div>
        
        <!-- ê¶Œì¥ ì¡°ì¹˜ -->
        <div class="section">
            <h2>ğŸ’¡ ê¶Œì¥ ì¡°ì¹˜</h2>
            <button class="btn-danger" onclick="clearCache()">ğŸ—‘ï¸ ìºì‹œ ì‚­ì œ ì•ˆë‚´</button>
            <button class="btn-success" onclick="showServerGuide()">ğŸš€ ë¡œì»¬ ì„œë²„ ì‹¤í–‰ ê°€ì´ë“œ</button>
        </div>
    </div>

    <script>
        const STOCK_DATABASE = {
            'ë°©ì‚°': [
                { ticker: 'LMT', name: 'Lockheed Martin', price: 445.50 },
                { ticker: '012450', name: 'í•œí™”ì—ì–´ë¡œìŠ¤í˜ì´ìŠ¤', price: 185000 },
                { ticker: '079550', name: 'LIGë„¥ìŠ¤ì›', price: 95000 }
            ],
            'ë°˜ë„ì²´': [
                { ticker: '005930', name: 'ì‚¼ì„±ì „ì', price: 75000 },
                { ticker: '000660', name: 'SKí•˜ì´ë‹‰ìŠ¤', price: 142000 }
            ]
        };

        // ì„¹í„° ë³€ê²½
        document.getElementById('test-sector').addEventListener('change', function() {
            const sector = this.value;
            const stockSelect = document.getElementById('test-stock');
            stockSelect.innerHTML = '<option value="">-- ì¢…ëª© ì„ íƒ --</option>';
            
            if (sector && STOCK_DATABASE[sector]) {
                STOCK_DATABASE[sector].forEach(stock => {
                    const option = document.createElement('option');
                    option.value = stock.ticker;
                    option.textContent = `${stock.name} (${stock.ticker})`;
                    option.dataset.price = stock.price;
                    option.dataset.name = stock.name;
                    stockSelect.appendChild(option);
                });
            }
        });

        // í…ŒìŠ¤íŠ¸ 1: ì£¼ê°€ ìë™ ì…ë ¥
        function testPriceInput() {
            const result = document.getElementById('result1');
            result.style.display = 'block';
            
            const stockSelect = document.getElementById('test-stock');
            const selectedOption = stockSelect.options[stockSelect.selectedIndex];
            
            let html = '<div class="info">ğŸ“Š ì£¼ê°€ ìë™ ì…ë ¥ í…ŒìŠ¤íŠ¸</div>';
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            
            html += `<div>ì„ íƒ ì¸ë±ìŠ¤: ${stockSelect.selectedIndex}</div>`;
            html += `<div>ì„ íƒ ê°’: ${stockSelect.value || '(ì—†ìŒ)'}</div>`;
            html += `<div>ì˜µì…˜ í…ìŠ¤íŠ¸: ${selectedOption?.textContent || '(ì—†ìŒ)'}</div>`;
            html += `<div>Dataset.price: ${selectedOption?.dataset?.price || '(ì—†ìŒ)'}</div>`;
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            
            if (!stockSelect.value) {
                html += '<div class="error">âŒ ì¢…ëª©ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</div>';
            } else if (selectedOption?.dataset?.price) {
                html += `<div class="success">âœ… ì£¼ê°€ ìë™ ì…ë ¥ ì„±ê³µ: ${selectedOption.dataset.price}</div>`;
            } else {
                html += '<div class="error">âŒ Dataset.priceê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                html += '<div class="error">â†’ STOCK_DATABASE ë¬¸ì œ ë˜ëŠ” ì˜µì…˜ ìƒì„± ì˜¤ë¥˜</div>';
            }
            
            result.innerHTML = html;
        }

        // í…ŒìŠ¤íŠ¸ 2: íŒŒì¼ ê²½ë¡œ
        function checkFiles() {
            const result = document.getElementById('result2');
            result.style.display = 'block';
            
            let html = '<div class="info">ğŸ“ íŒŒì¼ ê²½ë¡œ ê²€ì‚¬</div>';
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            html += `<div>í˜„ì¬ URL: ${window.location.href}</div>`;
            html += `<div>í”„ë¡œí† ì½œ: ${window.location.protocol}</div>`;
            html += `<div>ê²½ë¡œ: ${window.location.pathname}</div>`;
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            
            if (window.location.protocol === 'file:') {
                html += '<div class="error">âš ï¸ file:// í”„ë¡œí† ì½œ ì‚¬ìš© ì¤‘</div>';
                html += '<div class="error">â†’ ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>';
                html += '<div class="info">â†’ ë¡œì»¬ ì„œë²„ ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤</div>';
            } else {
                html += '<div class="success">âœ… HTTP í”„ë¡œí† ì½œ ì‚¬ìš© ì¤‘ (ì •ìƒ)</div>';
            }
            
            // í•„ìˆ˜ íŒŒì¼ ì²´í¬
            const files = [
                'chart_analysis.html',
                'trade_plan_simulation.html',
                'market_driven_plan.html'
            ];
            
            html += '<div style="margin-top:10px;">í•„ìˆ˜ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€:</div>';
            
            files.forEach(file => {
                // ì‹¤ì œë¡œëŠ” fetchë¡œ í™•ì¸í•´ì•¼ í•˜ì§€ë§Œ ê°„ë‹¨íˆ í‘œì‹œ
                html += `<div>â€¢ ${file}: <span class="info">ìœ„ì¹˜ í™•ì¸ í•„ìš”</span></div>`;
            });
            
            result.innerHTML = html;
        }

        // í…ŒìŠ¤íŠ¸ 3: ì°¨íŠ¸ ì—´ê¸°
        function testChartOpen() {
            const result = document.getElementById('result3');
            result.style.display = 'block';
            
            let html = '<div class="info">ğŸ“Š ì°¨íŠ¸ ì—´ê¸° í…ŒìŠ¤íŠ¸</div>';
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            
            const chartUrl = 'chart_analysis.html?ticker=005930';
            html += `<div>ì‹œë„ URL: ${chartUrl}</div>`;
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            
            try {
                const newWindow = window.open(chartUrl, '_blank');
                if (newWindow) {
                    html += '<div class="success">âœ… ì°½ì´ ì—´ë ¸ìŠµë‹ˆë‹¤</div>';
                    html += '<div class="info">â†’ 2ì´ˆ í›„ 404 ì˜¤ë¥˜ í™•ì¸ ì˜ˆì •</div>';
                    
                    setTimeout(() => {
                        if (newWindow.closed) {
                            html += '<div class="error">âš ï¸ ì°½ì´ ìë™ìœ¼ë¡œ ë‹«í˜”ìŠµë‹ˆë‹¤ (404 ê°€ëŠ¥ì„±)</div>';
                            result.innerHTML = html;
                        } else {
                            html += '<div class="success">âœ… ì°¨íŠ¸ í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ì—´ë ¸ìŠµë‹ˆë‹¤</div>';
                            result.innerHTML = html;
                        }
                    }, 2000);
                } else {
                    html += '<div class="error">âŒ íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤</div>';
                    html += '<div class="info">â†’ ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ ì˜†ì˜ íŒì—… ì•„ì´ì½˜ í™•ì¸</div>';
                }
            } catch (error) {
                html += `<div class="error">âŒ ì˜¤ë¥˜: ${error.message}</div>`;
            }
            
            result.innerHTML = html;
        }

        // í…ŒìŠ¤íŠ¸ 4: í™˜ê²½ ì •ë³´
        function showEnvironment() {
            const result = document.getElementById('result4');
            result.style.display = 'block';
            
            let html = '<div class="info">ğŸ–¥ï¸ ë¸Œë¼ìš°ì € í™˜ê²½ ì •ë³´</div>';
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            html += `<div>ë¸Œë¼ìš°ì €: ${navigator.userAgent}</div>`;
            html += `<div>ì–¸ì–´: ${navigator.language}</div>`;
            html += `<div>í”Œë«í¼: ${navigator.platform}</div>`;
            html += `<div>ì¿ í‚¤ í—ˆìš©: ${navigator.cookieEnabled ? 'Yes' : 'No'}</div>`;
            html += `<div>ì˜¨ë¼ì¸: ${navigator.onLine ? 'Yes' : 'No'}</div>`;
            html += '<div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>';
            html += `<div>í™”ë©´ í¬ê¸°: ${window.innerWidth} x ${window.innerHeight}</div>`;
            html += `<div>localStorage ì‚¬ìš© ê°€ëŠ¥: ${typeof(Storage) !== "undefined" ? 'Yes' : 'No'}</div>`;
            
            result.innerHTML = html;
        }

        // ìºì‹œ ì‚­ì œ ì•ˆë‚´
        function clearCache() {
            alert(`ğŸ“Œ ìºì‹œ ì‚­ì œ ë°©ë²•:

Windows/Linux:
Ctrl + Shift + Delete

Mac:
Cmd + Shift + Delete

ì„ íƒ í•­ëª©:
âœ… ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼
âœ… ì „ì²´ ê¸°ê°„

ê·¸ ë‹¤ìŒ:
1. ì‚­ì œ í´ë¦­
2. ë¸Œë¼ìš°ì € ì™„ì „ ì¢…ë£Œ
3. ë¸Œë¼ìš°ì € ì¬ì‹œì‘
4. ë‹¤ì‹œ í…ŒìŠ¤íŠ¸`);
        }

        // ë¡œì»¬ ì„œë²„ ê°€ì´ë“œ
        function showServerGuide() {
            alert(`ğŸš€ ë¡œì»¬ ì„œë²„ ì‹¤í–‰ ë°©ë²•:

1. í„°ë¯¸ë„/ëª…ë ¹ í”„ë¡¬í”„íŠ¸ ì—´ê¸°

2. í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™:
   cd /path/to/decision-stream

3. Python ì„œë²„ ì‹œì‘:
   python -m http.server 8000

4. ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†:
   http://localhost:8000/

ì¥ì :
âœ… file:// ì œí•œ íšŒí”¼
âœ… ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™
âœ… ì‹¤ì œ ë°°í¬ í™˜ê²½ê³¼ ë™ì¼`);
        }
    </script>
</body>
</html>
