# 🎯 Trade Plan Simulation - 구현 완료 요약

## ✅ 완료된 작업

### 1. **프론트엔드 시뮬레이션 도구** (`trade_plan_simulation.html`)

#### 주요 기능
- **시장 선택**: 한국/미국 시장 선택
- **종목 선택**: 섹터별 종목 데이터베이스 (6개 섹터, 18개 종목)
- **매매 조건 설정**:
  - 투자 기간: 단기(1-2주) / 중기(1-3개월)
  - 리스크 성향: 보수 / 중립 / 공격
  - 투자 금액: 사용자 입력
- **자동 계산**:
  - 진입가 (현재가 대비 2% 할인)
  - 손절가 (리스크별 -8%, -10%, -12%)
  - 목표가 1차/2차 (리스크별 +15~45%)
  - 매수 수량 및 포지션 비중
  - 예상 손실 및 수익
  - 손익비 (Risk/Reward Ratio)

#### 7요소 체크리스트
1. **수급 신호** (0-25점): 외국인/기관 매수 확인
2. **정책/테마** (0-30점): 확정·지속·실적연결 뉴스
3. **시장 사이클** (0-10점): MA20, 변동성, Market Regime
4. **기업 질** (0-10점): 부채비율, 수익성, 성장성
5. **서사** (0-8점): 산업 성장 스토리, 경쟁력
6. **하방 리스크** (0-10점): 과열 신호, 기술적 지지
7. **시간 적합성** (0-7점): 조정 후 진입 타이밍

#### 시뮬레이션 기록 추적
- **통계 지표**: 총 시뮬레이션 수, 승률, 평균 수익률, 손익비
- **기록 테이블**: 일시, 종목, 진입가, 손절/목표, 결과, 수익률, 상태
- **LocalStorage 저장**: 브라우저에 최대 20건 기록 유지

---

### 2. **백엔드 API 엔드포인트** (`backend/server.py`)

#### 새로 추가된 API

##### `/trade_plan/generate` (POST)
```json
Request:
{
  "market": "KR",
  "sector": "반도체",
  "ticker": "005930",
  "name": "삼성전자",
  "current_price": 75000,
  "period": "중기",
  "risk": "중립",
  "capital": 5000000
}

Response:
{
  "entry_price": 73500,
  "stop_loss": 66150,
  "target_1": 88200,
  "target_2": 99225,
  "quantity": 68,
  "position_size": 0.25,
  "actual_investment": 4998000,
  "max_loss": 499800,
  "expected_profit": 999600,
  "risk_reward_ratio": 2.0,
  "checklist": [...],
  "risk_warning": "✅ 체크리스트 통과!",
  "total_score": 78
}
```

##### `/trade_plan/stocks` (GET)
- 섹터별 종목 리스트 제공
- 종목명, 티커, 현재가 정보

##### `/trade_plan/stats` (GET)
- 시뮬레이션 통계 조회
- 총 시뮬레이션 수, 승률, 평균 수익률, 손익비
- 최고/최저 수익률 종목

---

### 3. **포지션 사이징 및 리스크 관리 로직**

#### 리스크 성향별 파라미터

| 리스크 | 손절률 | 1차 목표 | 2차 목표 | 포지션 비중 |
|--------|--------|----------|----------|-------------|
| 보수   | -8%    | +15%     | +25%     | 20%         |
| 중립   | -10%   | +20%     | +35%     | 25%         |
| 공격   | -12%   | +25%     | +45%     | 30%         |

#### 익절 전략
- **1차 익절 (50%)**: +15~25% 도달 시 절반 매도
- **2차 익절 (30%)**: +25~45% 도달 시 30% 매도
- **잔량 (20%)**: 20일선 이탈 시까지 보유 (트레일링)

#### 손절 원칙
- **고정 손절**: 진입가 기준 -8% ~ -12%
- **추세 손절**: 20일선 종가 이탈 시
- **최대 손실**: -15% 절대 금지

---

### 4. **완전한 교육 가이드** (`TRADE_PLAN_GUIDE.md`)

#### 내용 구성
1. **개요 및 목적**: 시뮬레이션의 목표와 활용법
2. **빠른 시작**: 단계별 사용 흐름
3. **7요소 체크리스트 상세 설명**: 각 항목별 평가 기준 및 배점
4. **포지션 사이징 및 리스크 관리**: 진입/손절/익절 전략
5. **시뮬레이션 기록 분석**: 추적 지표 및 성과 개선 방법
6. **교육 시나리오**: 초급/중급/고급 단계별 학습 목표
7. **API 연동 가이드**: 백엔드 연동 예시
8. **실전 체크리스트**: 실전 전환 전 확인 사항
9. **FAQ**: 자주 묻는 질문 및 답변

#### 교육 단계별 목표

**초급 (1-10회)**:
- 프레임워크 숙지
- 체크리스트 이해
- 손절가 엄수 연습

**중급 (11-30회)**:
- 승률 ≥ 50%
- 평균 수익률 ≥ +5%
- 손익비 ≥ 1.8:1

**고급 (31회+)**:
- 승률 ≥ 55%
- 평균 수익률 ≥ +8%
- 손익비 ≥ 2.2:1
- 실전 전환 준비 완료

---

### 5. **통합 문서 업데이트**

#### `README.md` 업데이트
- Trade Plan Simulation 섹션 추가
- 시스템 구조 다이어그램 업데이트
- API 엔드포인트 문서 확장
- 시뮬레이션 학습 단계 가이드 추가

#### `home.html` 생성
- 프로젝트 랜딩 페이지
- Trade Plan Simulation 및 Dashboard 카드
- 빠른 시작 가이드
- 핵심 투자 원칙
- 문서 링크

---

## 📂 파일 구조

```
decision-stream/
├── home.html                       # 🆕 프로젝트 홈 (시작점)
├── trade_plan_simulation.html      # 🆕 매매 계획 시뮬레이션 (추천)
├── index.html                      # Decision Stream 대시보드
├── backend/
│   ├── server.py                   # 🔄 업데이트 (Trade Plan API 추가)
│   └── requirements.txt
├── screener/
│   └── ...
├── tools/
│   └── ...
├── README.md                       # 🔄 업데이트
├── QUICKSTART.md
└── TRADE_PLAN_GUIDE.md             # 🆕 시뮬레이션 완전 가이드
```

---

## 🚀 사용 방법

### 1단계: 서버 실행
```bash
cd backend
pip install -r requirements.txt
python server.py
```

### 2단계: 홈 페이지 열기
```bash
# 브라우저에서 home.html 열기
open home.html
```

### 3단계: Trade Plan Simulation 시작
- 홈에서 "Trade Plan Simulation" 카드 클릭
- 또는 직접 `trade_plan_simulation.html` 열기

### 4단계: 시뮬레이션 수행
1. 시장 선택 (한국/미국)
2. 섹터 및 종목 선택
3. 투자 조건 설정 (기간, 리스크, 금액)
4. "매매 계획 생성" 버튼 클릭
5. 결과 확인 및 7요소 체크리스트 검토
6. 시뮬레이션 기록 자동 저장

---

## 🎯 핵심 특징

### 1. **안전한 학습 환경**
- 실제 자금 투입 없이 매매 계획 수립 연습
- 무제한 시뮬레이션 가능
- 모든 기록이 브라우저에 저장 (개인정보 보호)

### 2. **체계적인 프레임워크**
- 7요소 체크리스트 기반 종합 평가
- 총점 70점 이상 진입 기준
- 항목별 세부 평가 및 피드백

### 3. **자동화된 리스크 관리**
- 리스크 성향별 자동 파라미터 설정
- 포지션 사이징 자동 계산
- 손익비 실시간 표시

### 4. **성과 추적 및 분석**
- 승률, 평균 수익률, 손익비 통계
- 시뮬레이션 기록 테이블
- 최고/최저 수익률 종목 추적

### 5. **실전 전환 가이드**
- 30회 시뮬레이션 기준 체크리스트
- 단계별 학습 목표 제시
- 실전 주의사항 상세 설명

---

## 📊 데이터 및 알고리즘

### 종목 데이터베이스 (6개 섹터)
1. **반도체**: 삼성전자, SK하이닉스, 한미반도체
2. **2차전지**: LG에너지솔루션, SK이노베이션, LG화학
3. **바이오**: 삼성바이오로직스, 셀트리온, SK바이오팜
4. **자동차**: 현대자동차, 기아, 현대모비스
5. **화학**: LG화학, 한화솔루션, 롯데케미칼
6. **조선**: 한국조선해양, 삼성중공업, 한화오션

### 점수 계산 알고리즘
- **수급 점수 (25점)**: 외국인/기관 누적 매수 규모 및 일수
- **정책 점수 (30점)**: 확정·지속·실적연결 여부
- **시장 점수 (10점)**: MA20, 변동성, Market Regime
- **기업 점수 (10점)**: 부채비율, 수익성, 성장성
- **서사 점수 (8점)**: 산업 성장 스토리, 경쟁력
- **리스크 점수 (10점)**: 과열 신호, 기술적 지지
- **타이밍 점수 (7점)**: 조정 후 진입 적합성

**총점 100점 만점 → 70점 이상 진입 권장**

---

## ⚠️ 주의사항

### 시뮬레이션의 한계
1. **슬리피지 미반영**: 실제 체결가는 계산값과 다를 수 있음
2. **감정 변수 제외**: 공포·탐욕이 실전에서는 영향
3. **유동성 미고려**: 대형주가 아니면 원하는 가격 매매 어려움
4. **거래비용 단순화**: 수수료, 세금 등 실제 비용 발생

### 실전 전환 시 권장사항
1. **최소 30회 시뮬레이션 완료**
2. **승률 50% 이상 달성**
3. **손익비 2:1 이상 확보**
4. **실전 자금 < 전체 자산의 20%로 시작**

---

## 🎓 학습 로드맵

```
1주차 (1-7회): 프레임워크 이해
   ↓
2-3주차 (8-15회): 체크리스트 숙달
   ↓
4-6주차 (16-30회): 리스크 관리 연습
   ↓
7-10주차 (31-50회): 최적화 및 실전 준비
   ↓
11주차+: 소액 실전 시작 (전체 자산의 10%)
```

---

## 📞 다음 단계 제안

### 1. 실제 HTS 데이터 연동
- 키움/미래에셋 HTS CSV 자동 변환
- 실시간 가격 및 수급 데이터 반영
- 백엔드 스크리너와 통합

### 2. 고급 기능 추가
- 포트폴리오 시뮬레이션 (다종목 동시 운용)
- 월간 성과 리포트 자동 생성 (PDF)
- 백테스팅 기능 (과거 데이터 기반 검증)

### 3. 실전 연동
- 증권사 API 연동 (주문 자동화)
- 실시간 알림 시스템
- 포지션 관리 자동화

---

## ✅ 완료 확인

- [x] 프론트엔드 시뮬레이션 도구 구현
- [x] 백엔드 API 엔드포인트 추가
- [x] 포지션 사이징 및 리스크 관리 로직
- [x] 시뮬레이션 기록 추적 및 통계
- [x] 완전한 교육 가이드 작성
- [x] README 및 문서 업데이트
- [x] 홈 페이지 생성

**모든 작업이 성공적으로 완료되었습니다! 🎉**

---

## 📚 참고 문서

- **프로젝트 개요**: README.md
- **실행 가이드**: QUICKSTART.md
- **시뮬레이션 가이드**: TRADE_PLAN_GUIDE.md
- **프론트엔드**: trade_plan_simulation.html
- **백엔드 API**: backend/server.py

---

**행운을 빕니다! 안전하고 수익성 있는 투자를 위해! 🚀📈**
